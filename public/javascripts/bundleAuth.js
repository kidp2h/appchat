$(document).ready((function(){$(".lds-hourglass").hide(),$(".signup-btn").click((function(e){e.preventDefault();let n=filterXSS($("#inputUsername").val());n=n.replace(/[^\w\s]/gi,"");let t=filterXSS($("#inputPassword").val()),a=filterXSS($("#inputRetypePwd").val()),s=grecaptcha.getResponse();null==n||""==n||null==t||""==t||null==a||""==a||""==s||null==t||""==t||null==a||""==a||(t!=a?swal.fire("Thông báo","Sao hai mật khẩu khác nhau thế ?","warning"):null==s||""==s?swal.fire("Thông báo","Captcha bạn eyyy :))","warning"):($(".signup-btn").prop("disabled",!0),$.ajax({type:"post",url:"/users/register",data:{username:n,password:t,retypePwd:a,captchaRes:s},beforeSend:function(){$(".lds-hourglass").show()},success:function(e){0==e.responseCode&&1==e.register?swal.fire("Thông báo","Đăng ký thành công","success").then((e=>{e.value&&(console.log(e),$(location).attr("href",window.location.origin+"/users/signin.p2h"))})):(swal.fire("Thông báo",e.msg,"error"),$(".signup-btn").prop("disabled",!1))},complete:function(e){$(".lds-hourglass").hide()}})))})),$(".signin-btn").click((e=>{e.preventDefault();let n=filterXSS($("#inputUsername").val());n=n.replace(/[^\w\s]/gi,"");let t=filterXSS($("#inputPassword").val()),a=grecaptcha.getResponse();null==n||""==n||null==t||""==t||(null==a||""==a?iziToast.warning({position:"bottomRight",title:"Notification",message:"Captcha kìa bạn eyy :))"}):($(".signin-btn").prop("disabled",!0),$.ajax({type:"post",url:"/users/login",data:{username:n,password:t,captchaRes:a},beforeSend:function(){$(".lds-hourglass").show()},success:function(e){404==e?(iziToast.error({position:"bottomRight",title:"Notification",message:"Có vấn đề về captcha, vui lòng thử lại !!"}),grecaptcha.reset(),$(".signin-btn").prop("disabled",!1)):1==e.success?$(location).attr("href",window.location.origin+"/AppChat"):(swal.fire("Thông báo","Tài khoản hoặc mật khẩu không hợp lệ !!!","error"),grecaptcha.reset(),$(".signin-btn").prop("disabled",!1))},error:function(e){"Unauthorized"==e.responseText&&($(".signin-btn").prop("disabled",!1),swal.fire("Thông báo","Tài khoản hoặc mật khẩu không hợp lệ !!!","error"),grecaptcha.reset())},complete:function(e){$(".lds-hourglass").hide()}})))})),$("form").submit((function(e){return!1}))}));